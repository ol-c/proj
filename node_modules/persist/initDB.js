var dynamodb = require('aws').dynamodb;



dynamodb.createTable({
    TableName : 'persist',
    AttributeDefinitions : [
        {
            AttributeName : 'time',
            AttributeType : 'N'
        }, {
            AttributeName : 'id',
            AttributeType : 'S'
        }, {
            AttributeName : 'operation',
            AttributeType : 'S'
        }, {
            AttributeName : 'field',
            AttributeType : 'S'
        }, {
            AttributeName : 'type',
            AttributeType : 'S'
        }, {
            AttributeName : 'value',
            AttributeType : 'S'
        }
    ],
    KeySchema : [
        {
            AttributeName : 'id',
            KeyType       : 'HASH'
        }, {
            AttributeName : 'time',
            KeyType       : 'RANGE'
        }
    ],
    ProvisionedThroughput : {
        ReadCapacityUnits  : 1,
        WriteCapacityUnits : 1
    },
    LocalSecondaryIndexes : [
        {
            IndexName : 'operation',
            KeySchema : [
                {
                    AttributeName : 'id',
                    KeyType : 'HASH'
                },
                {
                    AttributeName : 'operation',
                    KeyType : 'RANGE'
                }
            ],
            Projection : {
                ProjectionType : 'ALL'
            }
        },  {
            IndexName : 'field',
            KeySchema : [
                {
                    AttributeName : 'id',
                    KeyType : 'HASH'
                },
                {
                    AttributeName : 'field',
                    KeyType : 'RANGE'
                }
            ],
            Projection : {
                ProjectionType : 'ALL'
            }
        },  {
            IndexName : 'type',
            KeySchema : [
                {
                    AttributeName : 'id',
                    KeyType : 'HASH'
                },
                {
                    AttributeName : 'type',
                    KeyType : 'RANGE'
                }
            ],
            Projection : {
                ProjectionType : 'ALL'
            }
        },  {
            IndexName : 'value',
            KeySchema : [
                {
                    AttributeName : 'id',
                    KeyType : 'HASH'
                },
                {
                    AttributeName : 'value',
                    KeyType : 'RANGE'
                }
            ],
            Projection : {
                ProjectionType : 'ALL'
            }
        }
    ]
}, function (err, res) {
    console.log(err, res) ;   
});

dynamodb.createTable({
    TableName : 'locks',
    AttributeDefinitions : [
        {
            AttributeName : 'id',
            AttributeType : 'S'
        }, {
            AttributeName : 'time',
            AttributeType : 'N'
        }, {
            AttributeName : 'process',
            AttributeType : 'S'
        }    ],
    KeySchema : [
         {
            AttributeName : 'process',
            KeyType       : 'HASH'
        },
        {
            AttributeName : 'id',
            KeyType       : 'RANGE'
        }
    ],
    ProvisionedThroughput : {
        ReadCapacityUnits  : 1,
        WriteCapacityUnits : 1
    },
    LocalSecondaryIndexes : [
        {
            IndexName : 'time',
            KeySchema : [
                {
                    AttributeName : 'process',
                    KeyType : 'HASH'
                },
                {
                    AttributeName : 'time',
                    KeyType : 'RANGE'
                }
            ],
            Projection : {
                ProjectionType : 'ALL'
            }
        }
    ]
}, function (err, res) {
    console.log(err, res) ;   
});
